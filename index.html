<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>💼 Karigar Payment Tracker</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f7fa;
      color: #2c3e50;
      line-height: 1.6;
    }
    h1, h2 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 15px;
    }
    h1 { 
      font-size: 28px;
      margin-top: 10px;
    }
    h2 {
      font-size: 22px;
      margin-top: 25px;
      padding-bottom: 10px;
      border-bottom: 2px solid #3498db;
    }
    
    /* Form Layout */
    .form-container {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    .form-column {
      flex: 1;
      min-width: 320px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    .form-group {
      margin: 15px 0;
      display: flex;
      flex-direction: column;
    }
    label {
      font-weight: bold;
      color: #34495e;
      margin-bottom: 8px;
    }
    input {
      padding: 10px 12px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 4px;
      width: 100%;
    }
    input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
    }
    
    /* Buttons */
    button {
      padding: 10px 16px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .btn-success {
      background-color: #2ecc71;
      color: white;
    }
    .btn-success:hover {
      background-color: #27ae60;
    }
    .btn-danger {
      background-color: #e74c3c;
      color: white;
    }
    .btn-danger:hover {
      background-color: #c0392b;
    }
    .btn-info {
      background-color: #17a2b8;
      color: white;
    }
    .btn-info:hover {
      background-color: #138496;
    }
    .btn-current {
      background-color: #f39c12;
      color: white;
    }
    .btn-current:hover {
      background-color: #e67e22;
    }
    
    /* Chalan Entry System */
    .chalan-section {
      margin: 15px 0;
    }
    .chalan-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .chalan-row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      align-items: center;
    }
    .chalan-input {
      flex: 1;
    }
    .chalan-actions {
      display: flex;
      gap: 5px;
    }
    .chalan-btn {
      padding: 8px 12px;
      width: 40px;
      text-align: center;
    }
    
    /* Table Styles */
    .table-container {
      overflow-x: auto;
      margin: 20px 0;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 12px 15px;
      text-align: left;
      border: 1px solid #ddd;
    }
    th {
      background-color: #3498db;
      color: white;
      font-weight: bold;
      position: sticky;
      top: 0;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    tr:hover {
      background-color: #f0f7ff;
    }
    
    /* Login Box */
    .login-box {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: 50px auto;
    }
    .main-app {
      background: white;
      padding: 25px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    /* Utilities */
    .error {
      color: #e74c3c;
      text-align: center;
      font-weight: bold;
      margin: 10px 0;
    }
    .hidden { display: none; }
    .action-buttons { 
      display: flex; 
      gap: 8px;
    }
    #search {
      width: 100%;
      padding: 12px;
      margin: 15px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .week-selector {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      gap: 10px;
      flex-wrap: wrap;
    }
    .week-range {
      text-align: center;
      font-weight: bold;
      color: #2c3e50;
      margin: 10px 0;
      font-size: 16px;
    }
    .total-row {
      font-weight: bold;
      background-color: #e8f4fc !important;
    }
    
    /* Stacked chalan display */
    .chalan-stack {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .chalan-line {
      padding: 4px 0;
      border-bottom: 1px dashed #eee;
    }
    .chalan-line:last-child {
      border-bottom: none;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      .form-container {
        flex-direction: column;
      }
      .form-column {
        min-width: 100%;
      }
      .chalan-row {
        flex-direction: column;
        align-items: stretch;
      }
      .chalan-actions {
        justify-content: center;
      }
      th, td {
        padding: 8px 10px;
        font-size: 14px;
      }
      .action-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <!-- Login Screen -->
  <div id="loginScreen" class="login-box">
    <h1>🔐 Tracker Login</h1>
    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" value="ram" />
    </div>
    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" id="password" value="ram" />
    </div>
    <div style="text-align: center; margin-top: 20px;">
      <button onclick="login()" class="btn-success">Login</button>
    </div>
    <p id="loginError" class="error hidden">Incorrect username or password!</p>
  </div>

  <!-- Main App -->
  <div id="mainApp" class="main-app hidden">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h1>💼 Karigar Payment Tracker</h1>
      <button onclick="logout()" class="btn-danger">Logout</button>
    </div>

    <h2>➕ Add/Edit Worker Payment</h2>
    <div class="form-container">
      <div class="form-column">
        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" id="name" placeholder="Worker name" />
        </div>
        <div class="form-group">
          <label for="oldPayment">Old Payment Baaki (₹):</label>
          <input type="number" id="oldPayment" placeholder="0" min="0" oninput="calculateTotals()" />
        </div>

        <!-- Chalan Entries -->
        <div class="chalan-section">
          <div class="chalan-header">
            <label>Chalan Entries:</label>
            <button type="button" onclick="addChalanRow()" class="btn-info chalan-btn">+</button>
          </div>
          <div id="chalanList">
            <!-- Dynamic chalan rows will be added here -->
          </div>
        </div>

        <div class="form-group">
          <label for="totalChalanOld">Total (C + O) (₹):</label>
          <input type="number" id="totalChalanOld" placeholder="Auto" min="0" readonly />
        </div>
      </div>
      
      <div class="form-column">
        <div class="form-group">
          <label for="weekly">Weekly Payment (₹):</label>
          <input type="number" id="weekly" placeholder="0" min="0" oninput="calculateTotals()" />
        </div>
        <div class="form-group">
          <label for="sunday">Sunday Payment (₹):</label>
          <input type="number" id="sunday" placeholder="0" min="0" oninput="calculateTotals()" />
        </div>
        <div class="form-group">
          <label for="totalPayment">Total Payment (₹):</label>
          <input type="number" id="totalPayment" placeholder="Auto" min="0" readonly />
        </div>
        <div class="form-group">
          <label for="baaki">Baaki (₹):</label>
          <input type="number" id="baaki" placeholder="Auto" min="0" readonly />
        </div>
        <div class="form-group">
          <label for="advance">Advance Payment (₹):</label>
          <input type="number" id="advance" placeholder="0" min="0" oninput="calculateTotals()" />
        </div>
      </div>
    </div>

    <div style="text-align: center; margin: 25px 0;">
      <button onclick="addWorker()" class="btn-success">Save Payment</button>
      <button onclick="clearForm()" style="background: #95a5a6; color: white;">Clear Form</button>
    </div>

    <h2>📋 Payment Records</h2>
    <div class="week-selector">
      <button onclick="changeWeek(-1)" class="btn-current">◀ Previous Week</button>
      <button onclick="goToCurrentWeek()" class="btn-current">Current Week</button>
      <button onclick="changeWeek(1)" class="btn-current">Next Week ▶</button>
    </div>
    <div class="week-range" id="weekRangeDisplay"></div>
    
    <input type="text" id="search" placeholder="Search by name..." oninput="searchWorkers()" />
    
    <div class="table-container">
      <table id="workerTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Old Payment</th>
            <th>Chalan No.</th>
            <th>Chalan Amount</th>
            <th>Total (C+O)</th>
            <th>Weekly</th>
            <th>Sunday</th>
            <th>Total Pay</th>
            <th>Baaki</th>
            <th>Advance</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="workerList"></tbody>
        <tfoot id="tableFooter">
          <tr class="total-row">
            <td colspan="2"><strong>Totals:</strong></td>
            <td id="totalOldPayment">₹0</td>
            <td id="totalChalanAmount">₹0</td>
            <td id="totalChalanOldSum">₹0</td>
            <td id="totalWeekly">₹0</td>
            <td id="totalSunday">₹0</td>
            <td id="totalPaymentSum">₹0</td>
            <td id="totalBaaki">₹0</td>
            <td id="totalAdvance">₹0</td>
            <td></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>

  <script>
    const correctUser = "ram";
    const correctPass = "ram";
    let currentEditingId = null;
    let currentWeek = 0;

    // Initialize the app
    function initApp() {
      // Add one initial chalan row
      addChalanRow();
      document.getElementById("username").focus();
      updateWeekDisplay();
    }

    // Add new chalan row
    function addChalanRow(number = '', amount = '') {
      const container = document.getElementById('chalanList');
      const row = document.createElement('div');
      row.className = 'chalan-row';
      
      row.innerHTML = `
        <div class="chalan-input">
          <input type="text" class="chalan-number" placeholder="Chalan No." value="${number}" />
        </div>
        <div class="chalan-input">
          <input type="number" class="chalan-amount" placeholder="Amount" value="${amount}" min="0" oninput="calculateTotals()" />
        </div>
        <div class="chalan-actions">
          <button type="button" onclick="removeChalanRow(this)" class="btn-danger chalan-btn">−</button>
        </div>
      `;
      container.appendChild(row);
      calculateTotals();
    }

    // Remove chalan row
    function removeChalanRow(button) {
      const container = document.getElementById('chalanList');
      if (container.children.length > 1) {
        button.closest('.chalan-row').remove();
        calculateTotals();
      } else {
        alert("You need at least one chalan entry.");
      }
    }

    // Calculate totals
    function calculateTotals() {
      const oldPayment = parseFloat(document.getElementById("oldPayment").value) || 0;
      const weekly = parseFloat(document.getElementById("weekly").value) || 0;
      const sunday = parseFloat(document.getElementById("sunday").value) || 0;
      const advance = parseFloat(document.getElementById("advance").value) || 0;

      // Sum all chalan amounts
      const amounts = document.querySelectorAll('.chalan-amount');
      let totalChalanAmount = 0;
      amounts.forEach(input => {
        totalChalanAmount += parseFloat(input.value) || 0;
      });

      // Total (Chalan + Old)
      const totalChalanOld = oldPayment + totalChalanAmount;
      document.getElementById("totalChalanOld").value = totalChalanOld;

      // Total Payment
      const totalPayment = weekly + sunday;
      document.getElementById("totalPayment").value = totalPayment;

      // Baaki
      const baaki = totalChalanOld - totalPayment - advance;
      document.getElementById("baaki").value = baaki;
    }

    // Update week display
    function updateWeekDisplay() {
      const today = new Date();
      const weekStart = new Date(today);
      weekStart.setDate(today.getDate() - today.getDay() + currentWeek * 7);
      const weekEnd = new Date(weekStart);
      weekEnd.setDate(weekStart.getDate() + 6);
      const options = { day: '2-digit', month: 'short', year: 'numeric' };
      document.getElementById("weekRangeDisplay").textContent =
        `${weekStart.toLocaleDateString('en-IN', options)} to ${weekEnd.toLocaleDateString('en-IN', options)}`;
    }

    function goToCurrentWeek() { 
      currentWeek = 0; 
      updateWeekDisplay(); 
      loadWorkers(); 
    }
    
    function changeWeek(delta) { 
      currentWeek += delta; 
      updateWeekDisplay(); 
      loadWorkers(); 
    }

    // Login
    function login() {
      const u = document.getElementById("username").value.trim();
      const p = document.getElementById("password").value;
      if (u === correctUser && p === correctPass) {
        document.getElementById("loginScreen").classList.add("hidden");
        document.getElementById("mainApp").classList.remove("hidden");
        loadWorkers();
      } else {
        document.getElementById("loginError").classList.remove("hidden");
        document.getElementById("password").value = "";
        document.getElementById("password").focus();
      }
    }

    function logout() {
      if (confirm("Are you sure you want to logout?")) {
        document.getElementById("mainApp").classList.add("hidden");
        document.getElementById("loginScreen").classList.remove("hidden");
        document.getElementById("loginError").classList.add("hidden");
        clearForm();
      }
    }

    // Add or Update Worker
    function addWorker() {
      const name = document.getElementById("name").value.trim();
      if (!name) {
        alert("Please enter worker name!");
        document.getElementById("name").focus();
        return;
      }

      // Prevent duplicate name in current week
      const workers = getWorkers();
      const isDuplicate = workers.some(w => 
        w.name.toLowerCase() === name.toLowerCase() && 
        w.week === currentWeek && 
        w.id !== currentEditingId
      );
      if (isDuplicate) {
        alert("Worker with this name already exists this week!");
        return;
      }

      const oldPayment = document.getElementById("oldPayment").value || "0";
      const weekly = document.getElementById("weekly").value || "0";
      const sunday = document.getElementById("sunday").value || "0";
      const totalPayment = document.getElementById("totalPayment").value || "0";
      const baaki = document.getElementById("baaki").value || "0";
      const advance = document.getElementById("advance").value || "0";

      // Collect chalan data
      const chalanRows = document.querySelectorAll('#chalanList .chalan-row');
      const chalans = [];
      let totalChalanAmount = 0;

      chalanRows.forEach(row => {
        const num = row.querySelector('.chalan-number').value.trim();
        const amt = row.querySelector('.chalan-amount').value;
        if (num || amt !== '') {
          const amount = parseFloat(amt) || 0;
          chalans.push({ number: num, amount: amount.toString() });
          totalChalanAmount += amount;
        }
      });

      const totalChalanOld = (parseFloat(oldPayment) || 0) + totalChalanAmount;

      if (currentEditingId) {
        const idx = workers.findIndex(w => w.id === currentEditingId);
        if (idx !== -1) {
          workers[idx] = { 
            name, 
            oldPayment, 
            chalans, 
            totalChalanAmount: totalChalanAmount.toString(),
            totalChalanOld: totalChalanOld.toString(), 
            weekly, 
            sunday, 
            totalPayment, 
            baaki, 
            advance,
            id: currentEditingId, 
            week: currentWeek 
          };
        }
      } else {
        workers.push({ 
          name, 
          oldPayment, 
          chalans, 
          totalChalanAmount: totalChalanAmount.toString(),
          totalChalanOld: totalChalanOld.toString(), 
          weekly, 
          sunday, 
          totalPayment, 
          baaki, 
          advance,
          id: Date.now(), 
          week: currentWeek 
        });
      }

      localStorage.setItem("karigarWorkers", JSON.stringify(workers));
      clearForm();
      loadWorkers();
      alert(currentEditingId ? "Payment updated successfully!" : "Payment saved successfully!");
      currentEditingId = null;
    }

    // Load Workers
    function loadWorkers() {
      const workers = getWorkers().filter(w => w.week === currentWeek);
      const tbody = document.getElementById("workerList");
      tbody.innerHTML = "";

      let totals = [0, 0, 0, 0, 0, 0, 0, 0]; // old, chAmt, chOld, weekly, sun, pay, baaki, advance

      if (workers.length === 0) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td colspan="11" style="text-align:center;color:#95a5a6;">No records found for this week.</td>`;
        tbody.appendChild(tr);
      } else {
        workers.forEach(w => {
          const old = +w.oldPayment || 0;
          const chAmt = +w.totalChalanAmount || 0;
          const chOld = +w.totalChalanOld || 0;
          const we = +w.weekly || 0;
          const su = +w.sunday || 0;
          const tp = +w.totalPayment || 0;
          const bk = +w.baaki || 0;
          const ad = +w.advance || 0;

          totals[0] += old; 
          totals[1] += chAmt; 
          totals[2] += chOld; 
          totals[3] += we; 
          totals[4] += su; 
          totals[5] += tp; 
          totals[6] += bk; 
          totals[7] += ad;

          // Build stacked chalan display
          let chalanNumHtml = '', chalanAmtHtml = '';
          if (w.chalans && w.chalans.length > 0) {
            w.chalans.forEach(c => {
              const num = c.number || '-';
              const amt = parseFloat(c.amount) || 0;
              chalanNumHtml += `<div class="chalan-line">${num}</div>`;
              chalanAmtHtml += `<div class="chalan-line">₹${amt.toLocaleString('en-IN')}</div>`;
            });
          } else {
            chalanNumHtml = '<div class="chalan-line">-</div>';
            chalanAmtHtml = '<div class="chalan-line">₹0</div>';
          }

          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${w.name}</td>
            <td>₹${old.toLocaleString('en-IN')}</td>
            <td><div class="chalan-stack">${chalanNumHtml}</div></td>
            <td><div class="chalan-stack">${chalanAmtHtml}</div></td>
            <td>₹${chOld.toLocaleString('en-IN')}</td>
            <td>₹${we.toLocaleString('en-IN')}</td>
            <td>₹${su.toLocaleString('en-IN')}</td>
            <td>₹${tp.toLocaleString('en-IN')}</td>
            <td>₹${bk.toLocaleString('en-IN')}</td>
            <td>₹${ad.toLocaleString('en-IN')}</td>
            <td class="action-buttons">
              <button onclick="editWorker(${w.id})" class="btn-info">Edit</button>
              <button onclick="deleteWorker(${w.id})" class="btn-danger">Delete</button>
            </td>
          `;
          tbody.appendChild(tr);
        });
      }

      // Update footer
      document.getElementById("totalOldPayment").textContent = `₹${totals[0].toLocaleString('en-IN')}`;
      document.getElementById("totalChalanAmount").textContent = `₹${totals[1].toLocaleString('en-IN')}`;
      document.getElementById("totalChalanOldSum").textContent = `₹${totals[2].toLocaleString('en-IN')}`;
      document.getElementById("totalWeekly").textContent = `₹${totals[3].toLocaleString('en-IN')}`;
      document.getElementById("totalSunday").textContent = `₹${totals[4].toLocaleString('en-IN')}`;
      document.getElementById("totalPaymentSum").textContent = `₹${totals[5].toLocaleString('en-IN')}`;
      document.getElementById("totalBaaki").textContent = `₹${totals[6].toLocaleString('en-IN')}`;
      document.getElementById("totalAdvance").textContent = `₹${totals[7].toLocaleString('en-IN')}`;
    }

    // Edit Worker
    function editWorker(id) {
      const workers = getWorkers();
      const w = workers.find(w => w.id === id);
      if (!w) return;

      document.getElementById("name").value = w.name;
      document.getElementById("oldPayment").value = w.oldPayment;
      document.getElementById("weekly").value = w.weekly;
      document.getElementById("sunday").value = w.sunday;
      document.getElementById("totalPayment").value = w.totalPayment;
      document.getElementById("baaki").value = w.baaki;
      document.getElementById("advance").value = w.advance;

      // Clear and repopulate chalan list
      const container = document.getElementById("chalanList");
      container.innerHTML = "";
      if (w.chalans && w.chalans.length > 0) {
        w.chalans.forEach(c => addChalanRow(c.number, c.amount));
      } else {
        addChalanRow(); // at least one
      }

      calculateTotals();
      currentEditingId = id;
      document.getElementById("name").focus();
    }

    // Delete Worker
    function deleteWorker(id) {
      if (confirm("Are you sure you want to delete this payment record?")) {
        const workers = getWorkers().filter(w => w.id !== id);
        localStorage.setItem("karigarWorkers", JSON.stringify(workers));
        loadWorkers();
        if (currentEditingId === id) clearForm();
      }
    }

    // Clear Form
    function clearForm() {
      document.getElementById("name").value = "";
      document.getElementById("oldPayment").value = "";
      document.getElementById("chalanList").innerHTML = "";
      addChalanRow(); // one empty row
      document.getElementById("weekly").value = "";
      document.getElementById("sunday").value = "";
      document.getElementById("totalPayment").value = "";
      document.getElementById("baaki").value = "";
      document.getElementById("advance").value = "";
      document.getElementById("totalChalanOld").value = "";
      currentEditingId = null;
      document.getElementById("name").focus();
    }

    // Search Workers
    function searchWorkers() {
      const query = document.getElementById("search").value.toLowerCase();
      const workers = getWorkers().filter(w => w.week === currentWeek && w.name.toLowerCase().includes(query));
      const tbody = document.getElementById("workerList");
      tbody.innerHTML = "";

      let totals = [0, 0, 0, 0, 0, 0, 0, 0];

      if (workers.length === 0) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td colspan="11" style="text-align:center;color:#95a5a6;">No matching records found.</td>`;
        tbody.appendChild(tr);
      } else {
        workers.forEach(w => {
          const old = +w.oldPayment || 0;
          const chAmt = +w.totalChalanAmount || 0;
          const chOld = +w.totalChalanOld || 0;
          const we = +w.weekly || 0;
          const su = +w.sunday || 0;
          const tp = +w.totalPayment || 0;
          const bk = +w.baaki || 0;
          const ad = +w.advance || 0;

          totals[0] += old; 
          totals[1] += chAmt; 
          totals[2] += chOld; 
          totals[3] += we; 
          totals[4] += su; 
          totals[5] += tp; 
          totals[6] += bk; 
          totals[7] += ad;

          let chalanNumHtml = '', chalanAmtHtml = '';
          if (w.chalans && w.chalans.length > 0) {
            w.chalans.forEach(c => {
              const num = c.number || '-';
              const amt = parseFloat(c.amount) || 0;
              chalanNumHtml += `<div class="chalan-line">${num}</div>`;
              chalanAmtHtml += `<div class="chalan-line">₹${amt.toLocaleString('en-IN')}</div>`;
            });
          } else {
            chalanNumHtml = '<div class="chalan-line">-</div>';
            chalanAmtHtml = '<div class="chalan-line">₹0</div>';
          }

          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${w.name}</td>
            <td>₹${old.toLocaleString('en-IN')}</td>
            <td><div class="chalan-stack">${chalanNumHtml}</div></td>
            <td><div class="chalan-stack">${chalanAmtHtml}</div></td>
            <td>₹${chOld.toLocaleString('en-IN')}</td>
            <td>₹${we.toLocaleString('en-IN')}</td>
            <td>₹${su.toLocaleString('en-IN')}</td>
            <td>₹${tp.toLocaleString('en-IN')}</td>
            <td>₹${bk.toLocaleString('en-IN')}</td>
            <td>₹${ad.toLocaleString('en-IN')}</td>
            <td class="action-buttons">
              <button onclick="editWorker(${w.id})" class="btn-info">Edit</button>
              <button onclick="deleteWorker(${w.id})" class="btn-danger">Delete</button>
            </td>
          `;
          tbody.appendChild(tr);
        });
      }

      // Update footer totals for search results
      document.getElementById("totalOldPayment").textContent = `₹${totals[0].toLocaleString('en-IN')}`;
      document.getElementById("totalChalanAmount").textContent = `₹${totals[1].toLocaleString('en-IN')}`;
      document.getElementById("totalChalanOldSum").textContent = `₹${totals[2].toLocaleString('en-IN')}`;
      document.getElementById("totalWeekly").textContent = `₹${totals[3].toLocaleString('en-IN')}`;
      document.getElementById("totalSunday").textContent = `₹${totals[4].toLocaleString('en-IN')}`;
      document.getElementById("totalPaymentSum").textContent = `₹${totals[5].toLocaleString('en-IN')}`;
      document.getElementById("totalBaaki").textContent = `₹${totals[6].toLocaleString('en-IN')}`;
      document.getElementById("totalAdvance").textContent = `₹${totals[7].toLocaleString('en-IN')}`;
    }

    // Get Workers from localStorage
    function getWorkers() {
      const data = localStorage.getItem("karigarWorkers");
      return data ? JSON.parse(data) : [];
    }

    // Initialize the app when page loads
    window.onload = initApp;
  </script>
</body>
</html>